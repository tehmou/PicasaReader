<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

    <link href="css.less" rel="stylesheet/less" type="text/css">

    <script type="text/javascript" src="lib/jquery-1.6.1.js"></script>
    <script type="text/javascript" src="lib/jquery.mousewheel.js"></script>
   <script type="text/javascript" src="lib/less-1.0.41.min.js"></script>
    <script type="text/javascript" src="lib/underscore.js"></script>
    <script type="text/javascript" src="lib/backbone.js"></script>
    <script type="text/javascript" src="lib/RequestAnimationFrame.js"></script>
    <script type="text/javascript" src="lib/c0mposer-0.0.2.js"></script>
    <script type="text/javascript" src="lib/jsfacer.js"></script>

    <script type="text/javascript" src="js/views/filmlistbase.js"></script>
    <script type="text/javascript" src="js/views/glfilmlist.js"></script>
    <script type="text/javascript" src="js/views/filmlist.js"></script>

    <script type="text/javascript" src="js/views/listitem.js"></script>'
    <script type="text/javascript" src="js/views/domlistitem.js"></script>'
    <script type="text/javascript" src="js/views/gllistitem.js"></script>'

    <script type="text/javascript" src="js/views/animotor.js"></script>
    <script type="text/javascript" src="js/views/wheeler.js"></script>

    <script type="text/javascript" src="js/simplescrollcontroller.js"></script>
    <script type="text/javascript" src="js/gallery.js"></script>
    <script type="text/javascript" src="js/interfaces.js"></script>

    <script type="text/javascript" src="js/urlvars.js"></script>

    <script type="text/javascript">


        jsFacer.assert(domListItemObject, "iView");
        jsFacer.assert(glListItemObject, "iView");

        jsFacer.assert(filmListObject, "iView");
        jsFacer.assert(glFilmListObject, "iView");

        jsFacer.assert(simpleScrollController, "iScrollController");


        var galleryOptions = {
            feed: [],
            orientation: "vertical",
            mode: urlVars.hasOwnProperty("mode") ? urlVars.mode : "webgl",
            thumbnailWidth: 144,
            thumbnailHeight: 96,
            thumbnailGap: 7
        };

        $(function () {
            var filler = new Backbone.Model();
            _.extend(galleryOptions, {
                displayEl: $("#image-display"),
                prepend: [
                    new Backbone.Model({ text: "About" }),
                    new Backbone.Model({ text: "Menu" }),
                    new Backbone.Model({ text: "a" }),
                    new Backbone.Model({ text: "a" }),
                    new Backbone.Model({ text: "a" }),
                    new Backbone.Model({ text: "a" }),
                    new Backbone.Model({ text: "a" })
                ],
                append: [ filler, filler ]
            });

            createGallery(_.extend({}, galleryOptions, { el: $("#list-container"), mode: "css" }));
            createGallery(_.extend({}, galleryOptions, { el: $("#webgl-list-container"), mode: "webgl" }));

            $("#settings-container")
                    .append("<a href='" + baseUrl + "?mode=css'>" + (galleryOptions.mode === "css" ? "[x]" : "[ ]") + " css</a>")
                    .append("<a href='" + baseUrl + "'>"+ (galleryOptions.mode === "webgl" ? "[x]" : "[ ]") + " webgl</a>")
        });

        function initFeed (data) {
            var feed = galleryOptions.feed;
            _.each(data.feed.entry, function (entry) {
                feed.push({
                    thumbnailUrl: entry["media$group"]["media$thumbnail"][1].url,
                    imageUrl: entry.content.src
                })
            });
        };

    </script>

    <!--<script type="text/javascript" src="https://picasaweb.google.com/data/feed/base/user/101239827031429117300/albumid/5633001789628058321?alt=json-in-script&callback=initFeed&kind=photo&authkey=Gv1sRgCLbO9sGd-vyWjAE"></script>-->
    <!--<script type="text/javascript" src="https://picasaweb.google.com/data/feed/base/user/101239827031429117300/albumid/5648146613498236001?alt=json-in-script&callback=initFeed&kind=photo&authkey=Gv1sRgCNGsuZv7wvTvbw"></script>-->
</head>
<body>
    <div id="image-wrapper">
        <img id="image-display" alt=""/>
    </div>
    <div id="list-container"></div>
    <canvas id="webgl-list-container"></canvas>
    <div id="settings-container"></div>
</body>
</html>
