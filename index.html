<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

    <link href="css.less" rel="stylesheet/less" type="text/css">

    <script type="text/javascript" src="lib/jquery-1.6.1.js"></script>
    <script type="text/javascript" src="lib/jquery.mousewheel.js"></script>
   <script type="text/javascript" src="lib/less-1.0.41.min.js"></script>
    <script type="text/javascript" src="lib/underscore.js"></script>
    <script type="text/javascript" src="lib/backbone.js"></script>
    <script type="text/javascript" src="lib/RequestAnimationFrame.js"></script>
    <script type="text/javascript" src="lib/c0mposer-0.0.2.js"></script>
    <script type="text/javascript" src="lib/jsfacer.js"></script>

    <script type="text/javascript" src="js/views/listBase.js"></script>
    <script type="text/javascript" src="js/views/glList.js"></script>
    <script type="text/javascript" src="js/views/domList.js"></script>

    <script type="text/javascript" src="js/views/item/listItemBase.js"></script>'
    <script type="text/javascript" src="js/views/item/domListItem.js"></script>'
    <script type="text/javascript" src="js/views/item/glListItem.js"></script>'

    <script type="text/javascript" src="js/views/wheeler.js"></script>

    <script type="text/javascript" src="js/utils/kineticscrollcontroller.js"></script>
    <script type="text/javascript" src="js/gallery.js"></script>
    <script type="text/javascript" src="js/interfaces.js"></script>

    <script type="text/javascript" src="js/urlvars.js"></script>

    <script type="text/javascript">


        jsFacer.assert(domListItemObject, "iView");
        jsFacer.assert(glListItemObject, "iView");

        jsFacer.assert(domListObject, "iView");
        jsFacer.assert(glListObject, "iView");

        jsFacer.assert(simpleScrollController, "iScrollController");


        var galleryOptions = {
            feed: [],
            orientation: "vertical",
            mode: urlVars.hasOwnProperty("mode") ? urlVars.mode : "webgl",
            touchMode: "desktop",
            thumbnailWidth: 144,
            thumbnailHeight: 96,
            thumbnailGap: 7,
            numMarginItems: 1,
            createDebug: true,
            numDebugItems: 20
        };

        $(function () {
            _.extend(galleryOptions, {
                displayEl: $("#image-display"),
                prepend: [
                    //new Backbone.Model({ text: "About" }),
                    //new Backbone.Model({ text: "Menu" })
                    new Backbone.Model(),
                    new Backbone.Model(),
                    new Backbone.Model(),
                    new Backbone.Model()
                ],
                append: [
                    new Backbone.Model(),
                    new Backbone.Model(),
                    new Backbone.Model(),
                    new Backbone.Model()
                ]
            });

            createGallery(_.extend({}, galleryOptions, { el: $("#list-container"), mode: "css" }));
            createGallery(_.extend({}, galleryOptions, { el: $("#webgl-list-container"), mode: "webgl" }));

            //$("#settings-container")
            //        .append("<a href='" + baseUrl + "?mode=css'>" + (galleryOptions.mode === "css" ? "[x]" : "[ ]") + " css</a>")
            //        .append("<a href='" + baseUrl + "'>"+ (galleryOptions.mode === "webgl" ? "[x]" : "[ ]") + " webgl</a>")
        });

        function initFeed (data) {
            var feed = galleryOptions.feed;
            _.each(data.feed.entry, function (entry) {
                feed.push({
                    thumbnailUrl: entry["media$group"]["media$thumbnail"][1].url,
                    imageUrl: entry.content.src
                })
            });
        };

    </script>

    <!--<script type="text/javascript" src="https://picasaweb.google.com/data/feed/base/user/101239827031429117300/albumid/5633001789628058321?alt=json-in-script&callback=initFeed&kind=photo&authkey=Gv1sRgCLbO9sGd-vyWjAE"></script>-->
    <!--<script type="text/javascript" src="https://picasaweb.google.com/data/feed/base/user/101239827031429117300/albumid/5648146613498236001?alt=json-in-script&callback=initFeed&kind=photo&authkey=Gv1sRgCNGsuZv7wvTvbw"></script>-->
</head>
<body>
    <div id="image-wrapper">
        <img id="image-display" alt=""/>
    </div>
    <canvas id="webgl-list-container"></canvas>
    <div id="list-container"></div>
    <div id="settings-container"></div>
</body>
</html>
